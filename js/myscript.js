// favicon generated with the help of 
// http://convertico.com/
// http://www.favicon-generator.org/


// PHP - for each
// http://www.w3schools.com/php/php_looping_for.asp

// PHP - string replace
// http://www.w3schools.com/php/func_string_str_replace.asp

// jquery - remove class
// https://api.jquery.com/removeclass/

// jquery - change css property
// http://www.w3schools.com/jquery/jquery_css.asp

// PHP - floor function
// http://www.w3schools.com/php/func_math_floor.asp

// PHP - array contains
// http://php.net/manual/en/function.in-array.php

// PHP - random 
// http://www.w3schools.com/php/func_math_rand.asp

// PHP - Array Contains
// http://php.net/manual/en/function.in-array.php

// Jquery - setting attributes
// http://www.w3schools.com/jquery/html_attr.asp

// Jquery - -check checkbox is checked
// http://jquery-howto.blogspot.sg/2013/02/jquery-test-check-if-checkbox-checked.html

// Jquery - set width
// http://api.jquery.com/width/

// HTML - checkbox
// http://www.w3schools.com/html/tryit.asp?filename=tryhtml_checkbox

//PHP - trim whitespace
// http://php.net/manual/en/function.trim.php

// jquery - set css attributes
// http://www.w3schools.com/jquery/jquery_css.asp

// Code created with the help of Stack Overflow question -  clear array in php
// http://stackoverflow.com/questions/10261925/best-way-to-clear-a-php-arrays-values
// Question by amiawizard :  
// http://stackoverflow.com/users/506565/amiawizard
// Answer by Mark:
// http://stackoverflow.com/users/65387/mark

// php is null
// http://php.net/manual/en/function.is-null.php


// Code created with the help of Stack Overflow question - How do I access this object property with a hyphenated name?
// http://stackoverflow.com/questions/758449/how-do-i-access-this-object-property-with-a-hyphenated-name
// Question by Ian :  
// http://stackoverflow.com/users/39539/ian
// Edited by harke:  
// http://stackoverflow.com/users/367456/hakre
// Answer by Alister Bulman:  
// http://stackoverflow.com/users/6216/alister-bulman


// Code created with the help of Stack Overflow question - width bootstrap container
// http://stackoverflow.com/questions/9730263/setting-max-width-for-body-using-bootstrap
// Question by Olly F :  
// http://stackoverflow.com/users/1159248/olly-f
// Edited by lorem monkey:
// http://stackoverflow.com/users/221381/lorem-monkey
// Answer by jcg:  
// http://stackoverflow.com/users/1445056/jcg
// Edited by Daniel:
// http://stackoverflow.com/users/662605/daniel

// Code created with the help of Stack Overflow question - startsWith() and endsWith() functions in PHP
// http://stackoverflow.com/questions/834303/startswith-and-endswith-functions-in-php
// Question by Click Upvote :  
// http://stackoverflow.com/users/49153/click-upvote
// Edited by Salman A:  
// http://stackoverflow.com/users/87015/salman-a
// Answer by Salman A:  
// http://stackoverflow.com/users/87015/salman-a
// Edited by Emipro Technologies Pvt. Ltd.:
// http://stackoverflow.com/users/4093735/emipro-technologies-pvt-ltd

// Code created with the help of Stack Overflow question - scrollbar for div
// http://stackoverflow.com/questions/6698741/is-there-a-way-to-set-vertical-scrollbar-for-a-div    
// Question by Steven Zack :  
// http://stackoverflow.com/users/695101/steven-zack
// Edited by Eric Leschinski:  
// http://stackoverflow.com/users/445131/eric-leschinski
// Answer by John Hartsock:
// http://stackoverflow.com/users/254528/john-hartsock

// Code created with the help of Stack Overflow question - php post curl
// http://stackoverflow.com/questions/2138527/php-curl-http-post-sample-code
// Question by mysqllearner:  
// http://stackoverflow.com/users/213568/mysqllearner
// Edited by calumbrodie:  
// http://stackoverflow.com/users/181707/calumbrodie
// Answer by miku :
// http://stackoverflow.com/users/89391/miku

// Code created with the help of Stack Overflow question - Postgres - insert into specific column
// http://stackoverflow.com/questions/3205468/insert-value-into-a-column-in-postgresql
// Question by nix:
// http://stackoverflow.com/users/336709/nix
// Answer by Mike Sherrill 'Cat Recall':  
// http://stackoverflow.com/users/562459/mike-sherrill-cat-recall   

// Code created with the help of Stack Overflow question - searching for null columns in postgres\
// http://stackoverflow.com/questions/5345380/finding-columns-that-are-not-null-in-postgresql
// Question by Allan David Munja:
// http://stackoverflow.com/users/665127/allan-david-munja
// Edited by informatik01:
// http://stackoverflow.com/users/814702/informatik01
// Answer by Eduardo Iglesias:  
// http://stackoverflow.com/users/988889/eduardo-iglesias

// Code created with the help of Stack Overflow question - replacing quotes with character to prevent json error
// http://stackoverflow.com/questions/2428572/how-to-escape-single-quote
// Question by Ravi:
// http://stackoverflow.com/users/177971/ravi
// Answer by Pascal MARTIN:  
// http://stackoverflow.com/users/138475/pascal-martin
// Edited by satoru:
// http://stackoverflow.com/users/225262/satoru

// jquery - looping through elements with same class name
// https://api.jquery.com/each/

// colors - flatui.com

// No underline on hover in CSS
// http://www.w3schools.com/css/css_link.asp

// 'Last updated on' wording on main page inspired by Changi Airport Flight Stat Website

// Refresh now idea inspired by Changi Airport Flight Stat website

// Code created with the help of Stack Overflow question - using ob_flush to flush socket 
// http://stackoverflow.com/questions/7916686/send-push-notification-to-many-device-tokens
// Question by Zaakk:
// http://stackoverflow.com/users/281148/zaakk
// Edited by onnoweb:
// http://stackoverflow.com/users/474868/onnoweb
// Answer by Eduardo Iglesias:  
// http://stackoverflow.com/users/988889/eduardo-iglesias

// Code created with the help of Stack Overflow question - using ob_flush to flush socket 
// http://stackoverflow.com/questions/7916686/send-push-notification-to-many-device-tokens
// Question by Zaakk:
// http://stackoverflow.com/users/281148/zaakk
// Edited by onnoweb:
// http://stackoverflow.com/users/474868/onnoweb
// Answer by Eduardo Iglesias:  
// http://stackoverflow.com/users/988889/eduardo-iglesias

// Code created with the help of Stack Overflow question - part about looping through a while body with CURL without breaking the loop
// http://stackoverflow.com/questions/16233113/curl-within-while-loop-only-sending-variables-once-but-runs-the-loop-multiple-ti
// Question by cusackBOOM:
// http://stackoverflow.com/users/1736885/cusackboom
// Edited by Code Lღver:
// http://stackoverflow.com/users/1035257/code-l%E1%83%A6ver
// Answer by Amir:  
// http://stackoverflow.com/users/1906322/amir

// Creating PHP Functions
// http://www.w3schools.com/php/php_functions.asp

// Datatables - changing default sorting of rows    
// https://datatables.net/examples/basic_init/table_sorting.html

// Postgres - ordering rows by column
// http://www.postgresql.org/docs/8.1/static/queries-order.html

// Code created with the help of Stack Overflow question - allowing only numbers to be typed in a textbox
// http://stackoverflow.com/questions/7295843/allow-only-numbers-to-be-typed-in-a-textbox
// Question by Xalloumokkelos:
// http://stackoverflow.com/users/807325/xalloumokkelos
// Answer by Darin Dimitrov :
// http://stackoverflow.com/users/29407/darin-dimitrov

// Looping through rows of the table and modifying a cell within a row - Various / Datatables forum questions and answers 

// Code created with the help of Stack Overflow question - What is the proper way to check and uncheck a checkbox in HTML5?
// http://stackoverflow.com/questions/12700626/what-is-the-proper-way-to-check-and-uncheck-a-checkbox-in-html5
// Question by B Seven:
// http://stackoverflow.com/users/336920/b-seven
// Answer by valentinas :
// http://stackoverflow.com/users/1034821/valentinas

// Code created with the help of Stack Overflow question - javascript array subset
// http://stackoverflow.com/questions/19957348/javascript-arrays-remove-all-elements-contained-in-another-array
// Question by Tap:
// http://stackoverflow.com/users/830663/tap
// Answer by Ashwin Balamohan :
// http://stackoverflow.com/users/2011513/ashwin-balamohan

// Code created with the help of Stack Overflow question - creating date with timezone adjusted
// http://stackoverflow.com/questions/18630539/removing-blinking-of-cursor-from-read-only-fields
// Question by user2917204:
// http://stackoverflow.com/users/2917204/user2917204
// Answer by N.B. :
// http://stackoverflow.com/users/693806/n-b
// Edited by Alex :
// http://stackoverflow.com/users/1087370/alex

// Code created with the help of Stack Overflow question - looping through curl without breaking
// http://stackoverflow.com/questions/19732488/php-curl-request-as-a-foreach-loop
// Question by bart2puck:
// http://stackoverflow.com/users/2187142/bart2puck
// Answer by Shankar Damodaran:
// http://stackoverflow.com/users/1003917/shankar-damodaran

// Code created with the help of Stack Overflow question - css targetting readonly input
// http://stackoverflow.com/questions/18630539/removing-blinking-of-cursor-from-read-only-fields
// Question by risha.9177719594:
// http://stackoverflow.com/users/1105461/risha-9177719594
// Edited by Roko C. Buljan:
// http://stackoverflow.com/users/383904/roko-c-buljan
// Answer by Denys Séguret :
// http://stackoverflow.com/users/263525/denys-s%C3%A9guret
// Edited by Denys Séguret :
// http://stackoverflow.com/users/263525/denys-s%C3%A9guret

// Code created with the help of Stack Overflow question - disable checkbox
// http://stackoverflow.com/questions/19162913/disabling-checkbox-using-jquery
// Question by beebek:
// http://stackoverflow.com/users/1051068/beebek
// Answer by Arun P Johny:
// http://stackoverflow.com/users/114251/arun-p-johny

// Code created with the help of Stack Overflow question - disable textbox
// http://stackoverflow.com/questions/1362153/how-can-i-use-jquery-to-make-an-input-readonly
// Question by Jasmine:
// http://stackoverflow.com/users/79980/jasmine
// Edited by Adam Bellaire :
// http://stackoverflow.com/users/21632/adam-bellaire
// Answer by Gourneau:
// http://stackoverflow.com/users/56069/gourneau
// Edited by Dany Caissy :
// http://stackoverflow.com/users/2483649/dany-caissy

// Code created with the help of Stack Overflow question - favicon
// http://stackoverflow.com/questions/16375592/favicon-not-showing-up-in-google-chrome
// Question by Chris:
// http://stackoverflow.com/users/2333483/chris
// Edited by Eric Leschinski :
// http://stackoverflow.com/users/445131/eric-leschinski
// Answer by pmalbu:
// http://stackoverflow.com/users/3095992/pmalbu
// Edited by DominikAngerer:
// http://stackoverflow.com/users/1581725/dominikangerer

// Code created with the help of Stack Overflow question - finding the element with a particular custom attribute
// http://stackoverflow.com/questions/8628413/jquery-find-the-element-with-a-particular-custom-attribute
// Question by Chro:
// http://stackoverflow.com/users/573115/chro
// Edited by Emil:
// http://stackoverflow.com/users/767309/emil
// Answer by Ali Foroughi:
// http://stackoverflow.com/users/985084/ali-foroughi
// Edited by Emil:
// http://stackoverflow.com/users/767309/emil

// Code created with the help of Stack Overflow question - part about executing one event after another
// http://stackoverflow.com/questions/12584481/simple-fade-in-fade-out-div-with-jquery-on-click
// Question by user1562679:
// http://stackoverflow.com/users/1562679/user1562679
// Answer by suresh.g:
// http://stackoverflow.com/users/1517743/suresh-g
// Edited by Josh Mein:
// http://stackoverflow.com/users/2486/josh-mein

// Code created with the help of Stack Overflow question - part about fading out after a while
// http://stackoverflow.com/questions/536502/how-can-i-fade-out-a-div-using-jquery
// Question by Shiva Srikanth Thummidi:
// http://stackoverflow.com/users/60917/shiva-srikanth-thummidi
// Answer by ExodusNicholas:
// http://stackoverflow.com/users/218175/exodusnicholas

// Code created with the help of Stack Overflow question
// http://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript
// Question by umpirsky:
// http://stackoverflow.com/users/177056/umpirsky
// Answer by grr:
// http://stackoverflow.com/users/1041917/grr
// Edited by Fabian Fernandez:
// http://stackoverflow.com/users/859461/fabian-fernandez

// Code created with the help of Stack Overflow question - Call webpage in the background with PHP
// http://stackoverflow.com/users/526995/andy
// Question by Andy:
// http://stackoverflow.com/users/385275/mkn
// Answer by Anirudh Ramanathan:
// http://stackoverflow.com/users/759019/anirudh-ramanathan

// Code created with the help of Stack Overflow question - autoincrement primary key
// http://stackoverflow.com/questions/7718585/how-to-set-auto-increment-primary-key-in-postgresql
// Question by mkn:
// http://stackoverflow.com/users/385275/mkn
// Answer by A.H.:
// http://stackoverflow.com/users/947357/a-h

// php looping through arrays
// http://www.w3schools.com/php/php_looping_for.asp

// Code created with the help of Stack Overflow question - part about looping through fwrite, fixing it by copying row contents into array
// http://stackoverflow.com/questions/26184601/ios-send-multiple-push-notifications
// Question by kevin:
// http://stackoverflow.com/users/3669889/kevin
// Answer by kevin:
// http://stackoverflow.com/users/3669889/kevin

// Code created with the help of Stack Overflow question - part about calling php from another php
// http://stackoverflow.com/questions/2841093/execute-php-file-from-another-php
// Question by nabrugir:
// http://stackoverflow.com/users/335493/nabrugir
// Answer by Ignacio Vazquez-Abrams:
// http://stackoverflow.com/users/20862/ignacio-vazquez-abrams
// Edited by Eric Leschinski:
// http://stackoverflow.com/users/445131/eric-leschinski

// PHP - substring creation
// http://www.w3schools.com/php/func_string_substr.asp

// Code created with the help of Stack Overflow question - part about calling php from another php
// http://stackoverflow.com/questions/1035634/converting-an-integer-to-a-string-in-php
// Question by kman99:
// http://stackoverflow.com/users/127896/kman99
// Answer by Chris Thompson:
// http://stackoverflow.com/users/5982/chris-thompson
// Edited by Joyce Babu:
// http://stackoverflow.com/users/465590/joyce-babu

// Code created with the help of ask ubuntu.com question - part about installing curl
// http://askubuntu.com/questions/9293/how-do-i-install-curl-in-php5
// Question by Darren Newton:
// http://askubuntu.com/users/3137/darren-newton
// Answer by KFro :
// http://askubuntu.com/users/360/kfro
// Edited by David Planella:
// http://askubuntu.com/users/9781/david-planella


var xhrPool = [];
  $(document).ajaxSend(function(e, jqXHR, options){
    xhrPool.push(jqXHR);
  });
  $(document).ajaxComplete(function(e, jqXHR, options) {
    xhrPool = $.grep(xhrPool, function(x){return x!=jqXHR});
  });
  var abort = function() {
    $.each(xhrPool, function(idx, jqXHR) {
      jqXHR.abort();
    });
  };
   var oldbeforeunload = window.onbeforeunload;
  window.onbeforeunload = function() {
    var r = oldbeforeunload ? oldbeforeunload() : undefined;
    if (r == undefined) {
      // only cancel requests if there is no prompt to stay on the page
      // if there is a prompt, it will likely give the requests enough time to finish
      abort();
    }
    return r;
  }


$( document ).ajaxStart(function() {
NProgress.start();
});

$( document ).ajaxStop(function() {
    NProgress.done();
});

$(document).ready( function () { 



//Adapted from http://demo.tutorialzine.com/2009/09/simple-ajax-website-jquery/demo.html
checkURL(); //check if the URL has a reference to a page and load it

$('.rmm ul li a').click(function (e)
{
// Will only work if string in href matches with location

        //traverse through all our navigation links..
        checkURLClick(this.hash);    //.. and assign them a new onclick event, using their own hash as a parameter (#page1 for example)
});

setInterval("checkURL()",250);  //check for a change in the URL every 250 ms to detect if the history buttons have been used


} );

var lasturl="test"; //here we store the current URL hash

function checkURL(hash)
{
    if(!hash) hash=window.location.hash;    //if no parameter is provided, use the hash value from the current address

    if(hash != lasturl) // if the hash value has changed
    {
        lasturl=hash;   //update the current hash
        loadPage(hash); // and load the new page
    }
}

function checkURLClick(hash)
{
    $("body").off();
    if(!hash) hash=window.location.hash;    //if no parameter is provided, use the hash value from the current address

    
        lasturl=hash;   //update the current hash
        loadPage(hash); // and load the new page
    
}


function loadPage(url)  //the function that loads pages via AJAX
{
    url=url.replace('#page','');    //strip the #page part of the hash and leave only the page number

    //$('#loading').css('visibility','visible');  //show the rotating gif animation
   // $('.rmm ul li a').removeClass('mainSelected');
    
   
    $.ajax({    //create an ajax request to load_page.php
        type: "POST",
        url: "load_file.php",
        data: 'page='+url,  //with the page number as a parameter
        dataType: "html",   //expect html to be returned
        success: function(msg){

            if(parseInt(msg)!=0)    //if no errors
            {
                $('.mainBody').html(msg).hide().fadeIn('2000');    //load the returned html into pageContet
                //$('#loading').css('visibility','hidden');   //and hide the rotating gif
            }
        },
        error: function()
        {
            alert('error');
        }

    });
}